
[백준 14502_연구소](https://www.acmicpc.net/problem/14502)



## 조건

- 바이러스의 확산을 막기 위해서 연구소에 벽을 세운다.
- 연구소는 크기가 N x M
- 연구소는 빈 칸, 벽으로 이루어져 있다.
- 일부 칸은 바이러스가 존재하며, 이 바이러스는 상하좌우로 인접한 빈 칸으로 모두 퍼져나갈 수 있다.
- 새로 세울 수 있는 벽의 수는 3개이며, 꼭 3개여야만 한다.
- 벽을 3개 세운 뒤, 바이러스가 퍼질 수 없는 곳을 안전 영역이라고 한다.
- 연구소의 지도가 주어졌을 때 얻을 수 있는 안전 영역 크기의 최댓값을 구하시오



## 접근 방법

- 브루트포스와 bfs를 이용해주면 될 것 같다.
- 벽은 **무조건** 3개를 이용해야 하므로 모든 조합을 구한다면 아주 많아진다.
- 따라서 벽을 세우는 조합을 최소한의 노력으로 구해준다.
- 우선, 바이러스가 있는 좌표와, 빈 좌표를 찾아서 배열에 담아주고
- 빈 좌표의 개수를 저장해준다.
- 삼중 for문을 이용하여 아까 저장해준 빈 좌표 중 3개를 골라 벽을 세우고 bfs를 진행



```python

from collections import deque
import sys
input = sys.stdin.readline

n,m = map(int,input().split())
lab = [list(map(int,input().split())) for i in range(n)]
virus,empty = [],[]

# 벽 3개를 미리 빼준다.
safeArea = -3
for i in range(n):
    for j in range(m):
        if lab[i][j] == 0:
            safeArea+=1
            empty.append((i,j))
        elif lab[i][j] == 2:
            virus.append((i,j))

move = [(1,0),(0,1),(-1,0),(0,-1)] 
def bfs(arr):
    # 원본 지도 손상을 막기 위해 깊은 복사 후 그 지도로 진행
    tmparr = [i[:] for i in arr]
    q = deque(virus)
    r = 0
    while(q):
        x,y = q.popleft()
        for a,b in move:
            dx,dy = x+a,y+b
            if n>dx>=0 and m>dy>=0 and tmparr[dx][dy] == 0:
                tmparr[dx][dy] = 2
                q.append((dx,dy))
                r += 1
    return safeArea-r

# 벽 세우기 조합 완전 탐색
result = 0
for i in range(len(empty)-2):
    for j in range(i+1,len(empty)-1):
        for k in range(j+1,len(empty)):
            combi=[empty[i],empty[j],empty[k]]
            for x,y in combi:
                lab[x][y] = 1
            result = max(result,bfs(lab))
            for x,y in combi:
                lab[x][y] = 0
print(result)
```